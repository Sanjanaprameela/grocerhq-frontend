{"ast":null,"code":"var _jsxFileName = \"/Users/sanjana/Desktop/Capstone/Capstone_Final_deploy/frontend_git/grocerhq-frontend/src/components/Login/login.component.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useGoogleOneTapLogin } from 'react-google-one-tap-login';\nimport { Navigate } from 'react-router-dom';\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n\n  const [isSignedIn, setSignedin] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [isLoggedIn, setisLoggedIn] = useState(false);\n\n  const registerUser = (uname, uemail) => {\n    console.log(\"Calling register\", uname, uemail);\n    var userfound = false;\n    axios.get(\"https://grocerhqbackend.herokuapp.com/login\").then(res => {\n      res.data.find(users => {\n        if (users.email === uemail) {\n          userfound = true;\n          console.log(userfound);\n          console.log(\"A match email:\", users.email);\n          localStorage.setItem(\"userId\", users._id);\n          setisLoggedIn(true);\n        } else {\n          console.log(\"Not a match email:\", users.email);\n        }\n      });\n    }).finally(() => {\n      console.log(\"after Call\", userfound);\n\n      if (userfound) {\n        console.log(\"User Email already Exists: \", uemail);\n      } else {\n        const newUser = {\n          username: uname,\n          email: uemail\n        };\n        console.log(newUser);\n        axios.post(\"https://grocerhqbackend.herokuapp.com/login/register\", newUser).then(res => {\n          console.log(\"CAlled post\");\n          console.log(res.data);\n          localStorage.setItem(\"userId\", res.data);\n          setisLoggedIn(true);\n        });\n      }\n    });\n  };\n\n  useGoogleOneTapLogin({\n    onError: error => console.log(error),\n    onSuccess: response => {\n      setName(response.given_name);\n      setEmail(response.email);\n      setSignedin(true);\n      console.log(response);\n      registerUser(response.given_name, response.email);\n    },\n    googleAccountConfigs: {\n      client_id: \"167615487514-ljttv9mpd42dj02g4dbmj2lvmua9tcmm.apps.googleusercontent.com\"\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: isLoggedIn ? /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 22\n    }, this) : null\n  }, void 0, false);\n}\n\n_s(Login, \"Svsv2Z1pXC4+j4VPbfVyKneE18I=\", false, function () {\n  return [useGoogleOneTapLogin];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useGoogleOneTapLogin","Navigate","axios","Login","isSignedIn","setSignedin","name","setName","email","setEmail","isLoggedIn","setisLoggedIn","registerUser","uname","uemail","console","log","userfound","get","then","res","data","find","users","localStorage","setItem","_id","finally","newUser","username","post","onError","error","onSuccess","response","given_name","googleAccountConfigs","client_id"],"sources":["/Users/sanjana/Desktop/Capstone/Capstone_Final_deploy/frontend_git/grocerhq-frontend/src/components/Login/login.component.js"],"sourcesContent":["import React, {useState } from \"react\";\nimport { useGoogleOneTapLogin } from 'react-google-one-tap-login';\nimport { Navigate } from 'react-router-dom';\nimport axios from \"axios\";\n\n\n\nexport default function Login() {\n    const [isSignedIn, setSignedin] = useState(\"\");\n    const [name, setName] = useState(\"\");\n    const [email, setEmail] = useState(\"\"); \n    const [isLoggedIn, setisLoggedIn] = useState(false);\n\n    const registerUser = (uname, uemail) => {\n      console.log(\"Calling register\", uname, uemail);\n      var userfound = false;\n      axios.get(\"https://grocerhqbackend.herokuapp.com/login\")\n      .then((res) => {\n            res.data.find(users => {\n              if (users.email === uemail) {\n                userfound = true;\n                console.log(userfound);\n                console.log(\"A match email:\", users.email )\n                localStorage.setItem(\"userId\", users._id);\n                setisLoggedIn(true);\n              } else {\n                console.log(\"Not a match email:\", users.email)\n              }\n            });\n      })\n      .finally(() => {\n            console.log(\"after Call\", userfound);\n            if (userfound) {\n              console.log(\"User Email already Exists: \",uemail);\n            } else {\n              const newUser = {\n                username: uname,\n                email: uemail,\n              }\n              console.log(newUser);\n              axios.post(\"https://grocerhqbackend.herokuapp.com/login/register\", newUser)\n              .then((res) => {\n                console.log(\"CAlled post\")\n                console.log(res.data)\n                localStorage.setItem(\"userId\", res.data);\n                setisLoggedIn(true);\n              });\n            }\n        });\n\n    }\n\n    useGoogleOneTapLogin ({\n      onError: (error) => console.log(error),\n      onSuccess: (response) => {\n          setName(response.given_name);\n          setEmail(response.email);\n          setSignedin(true);\n          console.log(response)\n          registerUser(response.given_name, response.email)},\n          googleAccountConfigs: {\n          client_id:\"167615487514-ljttv9mpd42dj02g4dbmj2lvmua9tcmm.apps.googleusercontent.com\",\n        }\n        \n    })\n  return(\n      <>\n       {isLoggedIn ? <Navigate to=\"/\" /> : null}\n       </>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}